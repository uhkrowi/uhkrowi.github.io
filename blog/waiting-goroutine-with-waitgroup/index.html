<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Global Metadata --><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<meta name="generator" content="Astro v2.8.3">

<!-- Primary Meta Tags -->
<title>Waiting goroutines in go with sync.WaitGroup</title>
<meta name="title" content="Waiting goroutines in go with sync.WaitGroup">
<meta name="description">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="http://localhost:3000/blog/waiting-goroutine-with-waitgroup/">
<meta property="og:title" content="Waiting goroutines in go with sync.WaitGroup">
<meta property="og:description">
<meta property="og:image" content="http://localhost:3000/placeholder-social.jpg">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="http://localhost:3000/blog/waiting-goroutine-with-waitgroup/">
<meta property="twitter:title" content="Waiting goroutines in go with sync.WaitGroup">
<meta property="twitter:description">
<meta property="twitter:image" content="http://localhost:3000/placeholder-social.jpg">
  <link rel="stylesheet" href="/_astro/about.fb52835b.css" />
<link rel="stylesheet" href="/_astro/cicd-intro.2444ad35.css" /></head>

  <body class="body">
  <div class="px-5 md:px-0 md:flex md:justify-center space-y-12 md:space-y-0">
    <div class="md:hidden py-6 border-b border-gray-700">
      <div class="flex space-x-1">
  <a href="/about" style="text-decoration: none" class="max-w-max" title="About">
            <div class="flex items-center space-x-2 py-1 nav-btn border border-transparent hover:border-gray-700">
              <span>About</span>
            </div>
          </a><a href="/project" style="text-decoration: none" class="max-w-max" title="Project">
            <div class="flex items-center space-x-2 py-1 nav-btn border border-transparent hover:border-gray-700">
              <span>Project</span>
            </div>
          </a><a href="/blog" style="text-decoration: none" class="max-w-max" title="Blog">
            <div class="flex items-center space-x-2 py-1 nav-btn border border-[#3a10e5] text-[#3a10e5] hover:text-gray-700 font-bold">
              <span>Blog</span>
            </div>
          </a><a href="/cv" style="text-decoration: none" class="max-w-max" title="CV">
            <div class="flex items-center space-x-2 py-1 nav-btn border border-transparent hover:border-gray-700">
              <span>CV</span>
            </div>
          </a>
</div>
    </div>
    <div class="relative main">
      <div class="hidden md:block sticky top-0 h-[200px]"></div>
      <div class="hidden md:block sticky top-[150px]">
        <div class="absolute left-[-160px]">
          <div class="flex flex-col space-y-2">
  <a href="/about" style="text-decoration: none" class="max-w-max" title="About">
          <div class="flex items-center space-x-2 py-1 nav-btn border border-transparent hover:border-gray-700">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-circle2"><path d="M18 20a6 6 0 0 0-12 0"></path><circle cx="12" cy="10" r="4"></circle><circle cx="12" cy="12" r="10"></circle></svg>
            <span>About</span>
          </div>
        </a><a href="/project" style="text-decoration: none" class="max-w-max" title="Project">
          <div class="flex items-center space-x-2 py-1 nav-btn border border-transparent hover:border-gray-700">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-folder"><path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"></path></svg>
            <span>Project</span>
          </div>
        </a><a href="/blog" style="text-decoration: none" class="max-w-max" title="Blog">
          <div class="flex items-center space-x-2 py-1 nav-btn border border-[#3a10e5] text-[#3a10e5] hover:text-gray-700 font-bold">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-atom"><circle cx="12" cy="12" r="1"></circle><path d="M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z"></path><path d="M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z"></path></svg>
            <span>Blog</span>
          </div>
        </a><a href="/sendmail" style="text-decoration: none" class="max-w-max" title="Hire Me">
          <div class="flex items-center space-x-2 py-1 nav-btn border border-transparent hover:border-gray-700">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail"><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>
            <span>Hire Me</span>
          </div>
        </a><a href="/cv" style="text-decoration: none" class="max-w-max" title="CV">
          <div class="flex items-center space-x-2 py-1 nav-btn border border-transparent hover:border-gray-700">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-text"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" x2="8" y1="13" y2="13"></line><line x1="16" x2="8" y1="17" y2="17"></line><line x1="10" x2="8" y1="9" y2="9"></line></svg>
            <span>CV</span>
          </div>
        </a>
</div>
        </div>
      </div>
      <div class="sticky top-[150px] pb-[50px]">
        
    <article>
      <div class="flex items-center space-x-3 text-xs">
        <span>Aug 17, 2023</span>
        <span class="flex items-center p-1 bg-white">
          <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-1"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg> 
          <span>3 minutes</span>
        </span>
      </div>
      
      <p>
        </p><h1 class="font-ubuntu-mono text-center">Waiting goroutines in go with sync.WaitGroup</h1>
        <p>When we need to invoke some functions asynchronousely, we can use goroutine to achive the the goal.</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #6A737D">// first</span></span>
<span class="line"><span style="color: #F97583">go</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">func</span><span style="color: #E1E4E8"> () {</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// do something here</span></span>
<span class="line"><span style="color: #E1E4E8">}()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// second</span></span>
<span class="line"><span style="color: #F97583">go</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">func</span><span style="color: #E1E4E8"> () {</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// do something here</span></span>
<span class="line"><span style="color: #E1E4E8">}()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// third</span></span>
<span class="line"><span style="color: #F97583">go</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">func</span><span style="color: #E1E4E8"> () {</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// do something here</span></span>
<span class="line"><span style="color: #E1E4E8">}()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// other codes here will immediately executed</span></span></code></pre>
<p>All the functions above will be invoked almost at the same time, no waiting any previous function to complete.</p>
<p>But how if we want to wait all of it berfore going to other next codes?</p>
<p>Thereâ€™s why <code>sync.WaitGroup</code> exists for!</p>
<p>We can use <code>sync.WaitGroup</code> to wait some group of goroutines to complete first before we move to next code lines.</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> (</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">"</span><span style="color: #B392F0">sync</span><span style="color: #9ECBFF">"</span></span>
<span class="line"><span style="color: #E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F97583">var</span><span style="color: #E1E4E8"> wg sync.WaitGroup</span></span>
<span class="line"><span style="color: #E1E4E8">wg.</span><span style="color: #79B8FF">Add</span><span style="color: #E1E4E8">(</span><span style="color: #79B8FF">3</span><span style="color: #E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// first</span></span>
<span class="line"><span style="color: #F97583">go</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">func</span><span style="color: #E1E4E8"> () {</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">defer</span><span style="color: #E1E4E8"> wg.</span><span style="color: #79B8FF">Done</span><span style="color: #E1E4E8">()</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// do something here</span></span>
<span class="line"><span style="color: #E1E4E8">}()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// second</span></span>
<span class="line"><span style="color: #F97583">go</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">func</span><span style="color: #E1E4E8"> () {</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">defer</span><span style="color: #E1E4E8"> wg.</span><span style="color: #79B8FF">Done</span><span style="color: #E1E4E8">()</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// do something here</span></span>
<span class="line"><span style="color: #E1E4E8">}()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// third</span></span>
<span class="line"><span style="color: #F97583">go</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">func</span><span style="color: #E1E4E8"> () {</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">defer</span><span style="color: #E1E4E8"> wg.</span><span style="color: #79B8FF">Done</span><span style="color: #E1E4E8">()</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// do something here</span></span>
<span class="line"><span style="color: #E1E4E8">}()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">wg.</span><span style="color: #79B8FF">Wait</span><span style="color: #E1E4E8">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// other lines of code...</span></span></code></pre>
<p><code>wg.Wait()</code> waits the 3 goroutines to be done, then move to the next lines.</p>
      
    </article>
  
      </div>
    </div>
  </div>
</body>
</html>