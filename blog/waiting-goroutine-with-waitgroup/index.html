<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Global Metadata --><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<meta name="generator" content="Astro v2.8.3">

<!-- Primary Meta Tags -->
<title>Waiting goroutines in go with sync.WaitGroup</title>
<meta name="title" content="Waiting goroutines in go with sync.WaitGroup">
<meta name="description">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="http://localhost:3000/blog/waiting-goroutine-with-waitgroup/">
<meta property="og:title" content="Waiting goroutines in go with sync.WaitGroup">
<meta property="og:description">
<meta property="og:image" content="http://localhost:3000/placeholder-social.jpg">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="http://localhost:3000/blog/waiting-goroutine-with-waitgroup/">
<meta property="twitter:title" content="Waiting goroutines in go with sync.WaitGroup">
<meta property="twitter:description">
<meta property="twitter:image" content="http://localhost:3000/placeholder-social.jpg">
  <link rel="stylesheet" href="/_astro/about.1b39b249.css" />
<link rel="stylesheet" href="/_astro/cicd-intro.8523e9a8.css" /></head>

  <body class="body">
  <div class="md:pb-6 w-full">
    <header>
  <div class="flex justify-center">
    <div class="border bg-card text-card-foreground shadow-sm w-full md:max-width rounded-none md:rounded-xl">
      <div class="py-3 px-4 flex justify-between items-center">
        <div class="grid grid-cols-3 gap-3">
          <a href="/about" aria-label="Seek about me">
            <button class="inline-flex items-center justify-center text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10 rounded-full false" title="Profile">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-[25px] w-[25px] text-muted-foreground"><path d="M18 20a6 6 0 0 0-12 0"></path><circle cx="12" cy="10" r="4"></circle><circle cx="12" cy="12" r="10"></circle></svg>
            </button>
          </a>
          <a href="/works" aria-label="Some projects I've done">
            <button class="inline-flex items-center justify-center text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10 rounded-full false" title="Projects">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-[25px] w-[25px] text-muted-foreground"><path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"></path></svg>
            </button>
          </a>
          <a href="/blog" aria-label="Articles">
            <button class="inline-flex items-center justify-center text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10 rounded-full bg-[#f1f5f9]" title="Blog">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-[25px] w-[25px] text-muted-foreground"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 8h7"></path><path d="M8 12h6"></path><path d="M11 16h5"></path></svg>
            </button>
          </a>
        </div>
        <a href="/sendmail" aria-label="Send me an email about your needs">
          <button class="justify-center text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 text-primary-foreground hover:bg-primary/90 h-9 rounded-md px-3 bg-[#0d0d12] flex items-center space-x-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4"><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>
            <span>Hire Me</span>
          </button>
        </a>
      </div>
    </div>
  </div>
</header>
  </div>
  <main class="main">
    <div class="border bg-card text-card-foreground rounded-none md:rounded-xl shadow-none border-none md:shadow">
      
    <div class="py-6 px-6">
      <div class="flex flex-col">
        <article>
          <div class="flex items-center justify-between text-muted-foreground text-xs">
            Aug 17, 2023
            <span class="flex items-center">
              <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-1"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg> 
              <span>3 min read</span>
            </span>
          </div>
          
          <p>
            </p><h1 class="font-zillaslab text-center my-12">Waiting goroutines in go with sync.WaitGroup</h1>
            <p>When we need to invoke some functions asynchronousely, we can use goroutine to reach the the goal</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #6A737D">// first</span></span>
<span class="line"><span style="color: #F97583">go</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">func</span><span style="color: #E1E4E8"> () {</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// do something here</span></span>
<span class="line"><span style="color: #E1E4E8">}()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// second</span></span>
<span class="line"><span style="color: #F97583">go</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">func</span><span style="color: #E1E4E8"> () {</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// do something here</span></span>
<span class="line"><span style="color: #E1E4E8">}()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// third</span></span>
<span class="line"><span style="color: #F97583">go</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">func</span><span style="color: #E1E4E8"> () {</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// do something here</span></span>
<span class="line"><span style="color: #E1E4E8">}()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// other codes here will immediately executed</span></span></code></pre>
<p>All the functions above will be invoked almost at the same time, no waiting each other to complete.
But how if we want to wait all of it berfore going to other next codes?</p>
<p>Thereâ€™s why <code>sync.WaitGroup</code> exists for!</p>
<p>We can use <code>sync.WaitGroup</code> to wait some group of goroutines to complete first before we move to next code line.</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> (</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">"</span><span style="color: #B392F0">sync</span><span style="color: #9ECBFF">"</span></span>
<span class="line"><span style="color: #E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F97583">var</span><span style="color: #E1E4E8"> wg sync.WaitGroup</span></span>
<span class="line"><span style="color: #E1E4E8">wg.</span><span style="color: #79B8FF">Add</span><span style="color: #E1E4E8">(</span><span style="color: #79B8FF">3</span><span style="color: #E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// first</span></span>
<span class="line"><span style="color: #F97583">go</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">func</span><span style="color: #E1E4E8"> () {</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">defer</span><span style="color: #E1E4E8"> wg.</span><span style="color: #79B8FF">Done</span><span style="color: #E1E4E8">()</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// do something here</span></span>
<span class="line"><span style="color: #E1E4E8">}()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// second</span></span>
<span class="line"><span style="color: #F97583">go</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">func</span><span style="color: #E1E4E8"> () {</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">defer</span><span style="color: #E1E4E8"> wg.</span><span style="color: #79B8FF">Done</span><span style="color: #E1E4E8">()</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// do something here</span></span>
<span class="line"><span style="color: #E1E4E8">}()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// third</span></span>
<span class="line"><span style="color: #F97583">go</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">func</span><span style="color: #E1E4E8"> () {</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">defer</span><span style="color: #E1E4E8"> wg.</span><span style="color: #79B8FF">Done</span><span style="color: #E1E4E8">()</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// do something here</span></span>
<span class="line"><span style="color: #E1E4E8">}()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">wg.</span><span style="color: #79B8FF">Wait</span><span style="color: #E1E4E8">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// other lines of code...</span></span></code></pre>
<p><code>wg.Wait()</code> waits the 3 goroutines to be done, then move to next lines.</p>
          
        </article>
      </div>
    </div>
  
    </div>
  </main>
</body>
</html>