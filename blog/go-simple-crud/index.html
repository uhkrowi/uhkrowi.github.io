<!DOCTYPE html><html lang="en"><head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Astro v3.2.3"><!-- Primary Meta Tags --><title>Simple CRUD with GoFiber</title><meta name="title" content="Simple CRUD with GoFiber"><meta name="description" content=""><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="http://localhost:4321/blog/go-simple-crud/"><meta property="og:title" content="Simple CRUD with GoFiber"><meta property="og:description" content=""><meta property="og:image" content="http://localhost:4321/placeholder-social.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="http://localhost:4321/blog/go-simple-crud/"><meta property="twitter:title" content="Simple CRUD with GoFiber"><meta property="twitter:description" content=""><meta property="twitter:image" content="http://localhost:4321/placeholder-social.jpg"><!-- <ViewTransitions /> --><link rel="stylesheet" href="/_astro/about.f1d111e9.css" />
<style>@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0}}@keyframes astroFadeOut{to{opacity:0}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
</style>
<link rel="stylesheet" href="/_astro/cicd-intro.4a77683b.css" /><style>[data-astro-transition-scope="astro-qf4hgxyw-1"] { view-transition-name: astro-qf4hgxyw-1; }@layer astro { ::view-transition-old(astro-qf4hgxyw-1) { 
	animation-duration: 90ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both, both;
	animation-name: astroFadeOut, astroSlideToLeft; }::view-transition-new(astro-qf4hgxyw-1) { 
	animation-duration: 210ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-delay: 30ms;
	animation-fill-mode: both, both;
	animation-name: astroFadeIn, astroSlideFromRight; }[data-astro-transition=back]::view-transition-old(astro-qf4hgxyw-1) { 
	animation-name: astroFadeOut, astroSlideToRight; }[data-astro-transition=back]::view-transition-new(astro-qf4hgxyw-1) { 
	animation-name: astroFadeIn, astroSlideFromLeft; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-qf4hgxyw-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-qf4hgxyw-1"] { 
	animation-duration: 90ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both, both;
	animation-name: astroFadeOut, astroSlideToLeft; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-qf4hgxyw-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-qf4hgxyw-1"] { 
	animation-duration: 210ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-delay: 30ms;
	animation-fill-mode: both, both;
	animation-name: astroFadeIn, astroSlideFromRight; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-qf4hgxyw-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-qf4hgxyw-1"] { 
	animation-name: astroFadeOut, astroSlideToRight; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-qf4hgxyw-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-qf4hgxyw-1"] { 
	animation-name: astroFadeIn, astroSlideFromLeft; }</style></head><body class="body"><div class="px-5 md:px-0 md:flex md:justify-center space-y-12 md:space-y-0"><div class="md:hidden py-6 border-b border-gray-400"><div class="flex justify-end space-x-1"><a href="/about" style="text-decoration: none" class="max-w-max font-din-round" title="About"><div class="flex items-center space-x-2 py-1 nav-btn text-gray-800 border border-transparent hover:border-gray-700"><span>About</span></div></a><a href="/project" style="text-decoration: none" class="max-w-max font-din-round" title="Project"><div class="flex items-center space-x-2 py-1 nav-btn text-gray-800 border border-transparent hover:border-gray-700"><span>Project</span></div></a><a href="/blog" style="text-decoration: none" class="max-w-max font-din-round" title="Blog"><div class="flex items-center space-x-2 py-1 nav-btn text-gray-800 border border-prim text-prim hover:text-gray-700 font-bold"><span>Blog</span></div></a><a href="/contact" style="text-decoration: none" class="max-w-max font-din-round" title="Contact"><div class="flex items-center space-x-2 py-1 nav-btn text-gray-800 border border-transparent hover:border-gray-700"><span>Contact</span></div></a><a href="/cv" style="text-decoration: none" class="max-w-max font-din-round" title="CV"><div class="flex items-center space-x-2 py-1 nav-btn text-gray-800 border border-transparent hover:border-gray-700"><span>CV</span></div></a></div></div><div class="relative main"><div class="hidden md:block sticky top-0 h-[150px]"></div><div class="hidden md:block sticky top-[150px]"><div class="absolute left-[-200px]"><div class="flex flex-col space-y-2"><a href="/about" style="text-decoration: none" class="max-w-max font-din-round" title="About"><div class="flex items-center space-x-2 py-1 nav-btn text-gray-800 border border-transparent hover:border-gray-700"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-circle2"><path d="M18 20a6 6 0 0 0-12 0"></path><circle cx="12" cy="10" r="4"></circle><circle cx="12" cy="12" r="10"></circle></svg><span>About</span></div></a><a href="/project" style="text-decoration: none" class="max-w-max font-din-round" title="Project"><div class="flex items-center space-x-2 py-1 nav-btn text-gray-800 border border-transparent hover:border-gray-700"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-folder"><path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"></path></svg><span>Project</span></div></a><a href="/blog" style="text-decoration: none" class="max-w-max font-din-round" title="Blog"><div class="flex items-center space-x-2 py-1 nav-btn text-gray-800 border border-prim text-prim hover:text-gray-700 font-bold"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-atom"><circle cx="12" cy="12" r="1"></circle><path d="M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z"></path><path d="M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z"></path></svg><span>Blog</span></div></a><a href="/contact" style="text-decoration: none" class="max-w-max font-din-round" title="Contact"><div class="flex items-center space-x-2 py-1 nav-btn text-gray-800 border border-transparent hover:border-gray-700"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-contact"><path d="M17 18a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2"></path><rect width="18" height="18" x="3" y="4" rx="2"></rect><circle cx="12" cy="10" r="2"></circle><line x1="8" x2="8" y1="2" y2="4"></line><line x1="16" x2="16" y1="2" y2="4"></line></svg><span>Contact</span></div></a><a href="/cv" style="text-decoration: none" class="max-w-max font-din-round" title="CV"><div class="flex items-center space-x-2 py-1 nav-btn text-gray-800 border border-transparent hover:border-gray-700"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-text"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" x2="8" y1="13" y2="13"></line><line x1="16" x2="8" y1="17" y2="17"></line><line x1="10" x2="8" y1="9" y2="9"></line></svg><span>CV</span></div></a></div></div></div><div class="sticky top-[150px] pb-[50px]"><article data-astro-transition-scope="astro-qf4hgxyw-1"><div class="font-mona-sans pb-10 text-center text-3xl font-bold">Simple CRUD with GoFiber</div><div class="flex items-center justify-center space-x-3 text-xs"><span class="space-x-1"><span>Dec 2, 2023</span><!-- <span>&nbsp;·&nbsp;</span>
        <span>4 min read</span> --><span>&nbsp;·&nbsp;</span><a href="/tag/go" class="border border-gray-300 hover:bg-gray-100 rounded-full px-2 py-1 no-underline" style="text-decoration: none;"><span class="">go</span></a><a href="/tag/tutorial" class="border border-gray-300 hover:bg-gray-100 rounded-full px-2 py-1 no-underline" style="text-decoration: none;"><span class="">tutorial</span></a></span><!-- <span class="flex items-center p-1 bg-white">
        <BookOpen size={10} className="mx-1" />{" "}
        <span>{minuteRead} minute{minuteRead > 1 && "s"}</span>
      </span> --></div><div class="flex flex-col"><img class="w-full" src="https://images.pexels.com/photos/12000700/pexels-photo-12000700.jpeg?auto=compress&#38;cs=tinysrgb&#38;w=800&#38;h=800&#38;dpr=1" alt=""><div class="text-center text-sm text-gray-500">Photo by patrice schoefolt from Pexels</div></div><div class="pt-8"><p>Creating web APIs with Go is relatively easy and straight forward, especially when using framework, it will help you to fasten the development process.</p>
<p>In this article we’re gonna examine a little bit a simple CRUD web API with GoFiber, one of popular Go web frameworks existed.</p>
<p>First thing first, you have to make sure your environtment supports developing Go apps. You need MySQL on your machine to work with data in this app, you can use any other database if you want, just change the configuration and <em><strong>.env</strong></em> file as much as required.</p>
<p>To know better about this project, go to or get the full code by cloning the repo at <a href="https://github.com/uhkrowi/go-simple-crud" target="_blank"></a><a href="https://github.com/uhkrowi/go-simple-crud">https://github.com/uhkrowi/go-simple-crud</a>.</p>
<p>At the <em><strong>/cmd/app/main.go</strong></em> you’ll find <code>main()</code> and <code>setup()</code> function in order to initialize the setup of the application and running its web server.</p>
<pre class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F97583">func</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">main</span><span style="color: #E1E4E8">() {</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #F97583">defer</span><span style="color: #E1E4E8"> config.</span><span style="color: #79B8FF">CloseDBConnection</span><span style="color: #E1E4E8">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">	app </span><span style="color: #F97583">:=</span><span style="color: #E1E4E8"> fiber.</span><span style="color: #79B8FF">New</span><span style="color: #E1E4E8">(fiber.Config{</span></span>
<span class="line"><span style="color: #E1E4E8">		AppName: </span><span style="color: #9ECBFF">"CRUD"</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">	})</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">	app.</span><span style="color: #79B8FF">Use</span><span style="color: #E1E4E8">(cors.</span><span style="color: #79B8FF">New</span><span style="color: #E1E4E8">())</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #79B8FF">setup</span><span style="color: #E1E4E8">(app)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">	port </span><span style="color: #F97583">:=</span><span style="color: #E1E4E8"> os.</span><span style="color: #79B8FF">Getenv</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">"PORT"</span><span style="color: #E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #F97583">if</span><span style="color: #E1E4E8"> port </span><span style="color: #F97583">==</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">""</span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">		port </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">"8080"</span></span>
<span class="line"><span style="color: #E1E4E8">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">	err </span><span style="color: #F97583">:=</span><span style="color: #E1E4E8"> app.</span><span style="color: #79B8FF">Listen</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">":"</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">+</span><span style="color: #E1E4E8"> port)</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #F97583">if</span><span style="color: #E1E4E8"> err </span><span style="color: #F97583">!=</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">nil</span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #79B8FF">panic</span><span style="color: #E1E4E8">(err)</span></span>
<span class="line"><span style="color: #E1E4E8">	}</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F97583">func</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">setup</span><span style="color: #E1E4E8">(app </span><span style="color: #F97583">*</span><span style="color: #E1E4E8">fiber.App) {</span></span>
<span class="line"><span style="color: #E1E4E8">	config.</span><span style="color: #79B8FF">InitDB</span><span style="color: #E1E4E8">()</span></span>
<span class="line"><span style="color: #E1E4E8">	db </span><span style="color: #F97583">:=</span><span style="color: #E1E4E8"> config.DBConn</span></span>
<span class="line"><span style="color: #E1E4E8">	validate </span><span style="color: #F97583">:=</span><span style="color: #E1E4E8"> validator.</span><span style="color: #79B8FF">New</span><span style="color: #E1E4E8">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">	apiV1 </span><span style="color: #F97583">:=</span><span style="color: #E1E4E8"> app.</span><span style="color: #79B8FF">Group</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">"/api/v1"</span><span style="color: #E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">	route.</span><span style="color: #79B8FF">ProductRoute</span><span style="color: #E1E4E8">(apiV1.</span><span style="color: #79B8FF">Group</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">"/product"</span><span style="color: #E1E4E8">), db, validate)</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre>
<p>Move to <em><strong>/internal/app/model/product.go</strong></em> you’ll find a model of product that has a <code>Variants</code> field which would contains the list of variants of the product.</p>
<pre class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F97583">type</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">Product</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">struct</span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">	ID       uuid.UUID </span><span style="color: #9ECBFF">`gorm:"primaryKey;column:id" json:"id" swaggerignore:"true"`</span></span>
<span class="line"><span style="color: #E1E4E8">	Name     </span><span style="color: #F97583">string</span><span style="color: #E1E4E8">    </span><span style="color: #9ECBFF">`gorm:"column:name" json:"name"`</span></span>
<span class="line"><span style="color: #E1E4E8">	IsActive </span><span style="color: #F97583">bool</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">`gorm:"column:is_active" json:"is_active"`</span></span>
<span class="line"><span style="color: #E1E4E8">	Variants []Variant </span><span style="color: #9ECBFF">`gorm:"-" json:"variants"`</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre>
<pre class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F97583">type</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">VariantReqFilter</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">struct</span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">	ProductID </span><span style="color: #F97583">*</span><span style="color: #E1E4E8">uuid.UUID </span><span style="color: #9ECBFF">`query:"product_id"`</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F97583">type</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">Variant</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">struct</span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">	ID          uuid.UUID </span><span style="color: #9ECBFF">`gorm:"primaryKey;column:id" json:"id" search:"id" swaggerignore:"true"`</span></span>
<span class="line"><span style="color: #E1E4E8">	Name        </span><span style="color: #F97583">string</span><span style="color: #E1E4E8">    </span><span style="color: #9ECBFF">`gorm:"column:name" json:"name"`</span></span>
<span class="line"><span style="color: #E1E4E8">	ProductID   uuid.UUID </span><span style="color: #9ECBFF">`gorm:"column:product_id" json:"product_id"`</span></span>
<span class="line"><span style="color: #E1E4E8">	ProductName </span><span style="color: #F97583">string</span><span style="color: #E1E4E8">    </span><span style="color: #9ECBFF">`gorm:"column:product_name" json:"product_name" `</span></span>
<span class="line"><span style="color: #E1E4E8">	Price       </span><span style="color: #F97583">float64</span><span style="color: #E1E4E8">   </span><span style="color: #9ECBFF">`gorm:"column:price" json:"price" `</span></span>
<span class="line"><span style="color: #E1E4E8">	Stock       </span><span style="color: #F97583">int</span><span style="color: #E1E4E8">       </span><span style="color: #9ECBFF">`gorm:"column:stock" json:"stock"`</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre>
<p>From the models above, now we know there’s a <code>model</code> layer, and there are several different layers that will be envolved with the process in the app, such as:</p>
<ul>
<li>repository: a layer to work with data from your database.</li>
<li>usecase: this layer is a place where you put the main logic, usually communicate with <code>repository</code> and other <code>usecase</code>.</li>
<li>handler: receiving and handling incoming http requests and directing them to the right appropriate <code>usecase</code>.</li>
<li>route: mapping <code>usecase</code> and <code>handler</code> based on what endpoint being hit.</li>
</ul>
<p>Now for the rest of examinations, you can explore how the flow create, read, update and delete works by your own through the repo :D</p></div></article><footer class="w-full mt-16 flex items-center justify-between border-t border-gray-300 pt-12 text-gray-500 text-sm"><span>&copy; Nurul Uhkrowi 2023</span><div class="flex items-center space-x-4"><a href="mailto:uhkrowi@gmail.com" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="#9ca3af" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-white"><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg></a><a href="https://t.me/uhkrowi" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="#9ca3af" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-white"><line x1="22" x2="11" y1="2" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg></a><a href="https://linkedin.com/in/uhkrowi" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="#9ca3af" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-white"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg></a></div></footer></div></div></div></body></html>