<!DOCTYPE html><html lang="en"><head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Astro v3.2.3"><!-- Primary Meta Tags --><title>Simple CRUD with GoFiber</title><meta name="title" content="Simple CRUD with GoFiber"><meta name="description" content=""><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://uhkrowi.com/blog/go-simple-crud/"><meta property="og:title" content="Simple CRUD with GoFiber"><meta property="og:description" content=""><meta property="og:image" content="https://uhkrowi.com/placeholder-social.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://uhkrowi.com/blog/go-simple-crud/"><meta property="twitter:title" content="Simple CRUD with GoFiber"><meta property="twitter:description" content=""><meta property="twitter:image" content="https://uhkrowi.com/placeholder-social.jpg"><!-- <ViewTransitions /> --><link rel="stylesheet" href="/_astro/about.433ad626.css" />
<style>@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0}}@keyframes astroFadeOut{to{opacity:0}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
</style>
<link rel="stylesheet" href="/_astro/cicd-intro.800ab4d8.css" /><style>[data-astro-transition-scope="astro-qf4hgxyw-1"] { view-transition-name: astro-qf4hgxyw-1; }@layer astro { ::view-transition-old(astro-qf4hgxyw-1) { 
	animation-duration: 90ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both, both;
	animation-name: astroFadeOut, astroSlideToLeft; }::view-transition-new(astro-qf4hgxyw-1) { 
	animation-duration: 210ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-delay: 30ms;
	animation-fill-mode: both, both;
	animation-name: astroFadeIn, astroSlideFromRight; }[data-astro-transition=back]::view-transition-old(astro-qf4hgxyw-1) { 
	animation-name: astroFadeOut, astroSlideToRight; }[data-astro-transition=back]::view-transition-new(astro-qf4hgxyw-1) { 
	animation-name: astroFadeIn, astroSlideFromLeft; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-qf4hgxyw-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-qf4hgxyw-1"] { 
	animation-duration: 90ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both, both;
	animation-name: astroFadeOut, astroSlideToLeft; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-qf4hgxyw-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-qf4hgxyw-1"] { 
	animation-duration: 210ms, 220ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1), cubic-bezier(0.76, 0, 0.24, 1);
	animation-delay: 30ms;
	animation-fill-mode: both, both;
	animation-name: astroFadeIn, astroSlideFromRight; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-qf4hgxyw-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-qf4hgxyw-1"] { 
	animation-name: astroFadeOut, astroSlideToRight; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-qf4hgxyw-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-qf4hgxyw-1"] { 
	animation-name: astroFadeIn, astroSlideFromLeft; }</style></head><body class="body"><div class="px-8 pt-4 md:pt-0 md:px-0 md:flex md:justify-center space-y-12 md:space-y-0"><!-- <div class="md:hidden py-6 border-b border-gray-400">
        <MobileNavMenu />
      </div> --><div class="main lg:space-y-24"><div class="flex justify-center mb-12"><!-- class="grid grid-cols-5 gap-2 divide-x divide-black" --><!-- class="py-2 px-6 space-x-6 text-sm text-[16px] font-ibm-plex-sans" --><div class="py-2 px-6 bg-white border border-gray-400 rounded-full space-x-6 shadow-xl text-sm text-[16px] font-ibm-plex-sans"><a href="/about" style="text-decoration: none" title="About" class="text-gray-800 text-center"><span class=" text-gray-800 hover:text-link font-bold"><span>About</span></span></a><a href="/project" style="text-decoration: none" title="Showcase" class="text-gray-800 text-center"><span class=" text-gray-800 hover:text-link font-bold"><span>Showcase</span></span></a><a href="/blog" style="text-decoration: none" title="Notes" class="text-gray-800 text-center"><span class=" text-gray-800 font-bold"><span>Notes</span></span></a><a href="/contact" style="text-decoration: none" title="Contact" class="text-gray-800 text-center"><span class=" text-gray-800 hover:text-link font-bold"><span>Contact</span></span></a><a href="/cv" style="text-decoration: none" title="CV" class="text-gray-800 text-center"><span class=" text-gray-800 hover:text-link font-bold"><span>CV</span></span></a></div></div><div class="sticky top-[150px] pb-[50px]"><article class="md:text-lg" data-astro-transition-scope="astro-qf4hgxyw-1"><div class="pb-10 text-center text-3xl md:text-4xl font-segoe-ui-bold font-extrabold text-gray-900">Simple CRUD with GoFiber</div><div class="flex items-center justify-center space-x-3 text-xs md:text-sm"><span class="space-x-1"><span>Dec 2, 2023</span><!-- <span>&nbsp;·&nbsp;</span>
        <span>4 min read</span> --><span>&nbsp;·&nbsp;</span><a href="/tag/go" class="border border-gray-300 bg-white hover:bg-gray-100 rounded-md px-2 py-1 no-underline" style="text-decoration: none; font-weight: lighter;"><span class="">go</span></a><a href="/tag/tutorial" class="border border-gray-300 bg-white hover:bg-gray-100 rounded-md px-2 py-1 no-underline" style="text-decoration: none; font-weight: lighter;"><span class="">tutorial</span></a></span><!-- <span class="flex items-center p-1 bg-white">
        <BookOpen size={10} className="mx-1" />{" "}
        <span>{minuteRead} minute{minuteRead > 1 && "s"}</span>
      </span> --></div><div class="flex flex-col"></div><div><p>Creating web APIs with Go is relatively easy and straight forward, especially when using framework, it will help you to fasten the development process.</p>
<p>In this article we’re gonna examine a little bit a simple CRUD web API with GoFiber, one of popular Go web frameworks existed.</p>
<p>First thing first, you have to make sure your environtment supports developing Go apps. You need MySQL on your machine to work with data in this app, you can use any other database if you want, just change the configuration and <em><strong>.env</strong></em> file as much as required.</p>
<p>To know better about this project, go to or get the full code by cloning the repo at <a href="https://github.com/uhkrowi/go-simple-crud" target="_blank"></a><a href="https://github.com/uhkrowi/go-simple-crud">https://github.com/uhkrowi/go-simple-crud</a>.</p>
<p>At the <em><strong>/cmd/app/main.go</strong></em> you’ll find <code>main()</code> and <code>setup()</code> function in order to initialize the setup of the application and running its web server.</p>
<pre class="astro-code dark-plus" style="background-color: #1E1E1E; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #569CD6">func</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">main</span><span style="color: #D4D4D4">() {</span></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #C586C0">defer</span><span style="color: #D4D4D4"> config.</span><span style="color: #DCDCAA">CloseDBConnection</span><span style="color: #D4D4D4">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #9CDCFE">app</span><span style="color: #D4D4D4"> := fiber.</span><span style="color: #DCDCAA">New</span><span style="color: #D4D4D4">(fiber.Config{</span></span>
<span class="line"><span style="color: #D4D4D4">		AppName: </span><span style="color: #CE9178">"CRUD"</span><span style="color: #D4D4D4">,</span></span>
<span class="line"><span style="color: #D4D4D4">	})</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">	app.</span><span style="color: #DCDCAA">Use</span><span style="color: #D4D4D4">(cors.</span><span style="color: #DCDCAA">New</span><span style="color: #D4D4D4">())</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #DCDCAA">setup</span><span style="color: #D4D4D4">(app)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #9CDCFE">port</span><span style="color: #D4D4D4"> := os.</span><span style="color: #DCDCAA">Getenv</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">"PORT"</span><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> port == </span><span style="color: #CE9178">""</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">		</span><span style="color: #9CDCFE">port</span><span style="color: #D4D4D4"> = </span><span style="color: #CE9178">"8080"</span></span>
<span class="line"><span style="color: #D4D4D4">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #9CDCFE">err</span><span style="color: #D4D4D4"> := app.</span><span style="color: #DCDCAA">Listen</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">":"</span><span style="color: #D4D4D4"> + port)</span></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #C586C0">if</span><span style="color: #D4D4D4"> err != </span><span style="color: #569CD6">nil</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">		</span><span style="color: #DCDCAA">panic</span><span style="color: #D4D4D4">(err)</span></span>
<span class="line"><span style="color: #D4D4D4">	}</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">func</span><span style="color: #D4D4D4"> </span><span style="color: #DCDCAA">setup</span><span style="color: #D4D4D4">(app *fiber.App) {</span></span>
<span class="line"><span style="color: #D4D4D4">	config.</span><span style="color: #DCDCAA">InitDB</span><span style="color: #D4D4D4">()</span></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #9CDCFE">db</span><span style="color: #D4D4D4"> := config.DBConn</span></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #9CDCFE">validate</span><span style="color: #D4D4D4"> := validator.</span><span style="color: #DCDCAA">New</span><span style="color: #D4D4D4">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">	</span><span style="color: #9CDCFE">apiV1</span><span style="color: #D4D4D4"> := app.</span><span style="color: #DCDCAA">Group</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">"/api/v1"</span><span style="color: #D4D4D4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D4D4D4">	route.</span><span style="color: #DCDCAA">ProductRoute</span><span style="color: #D4D4D4">(apiV1.</span><span style="color: #DCDCAA">Group</span><span style="color: #D4D4D4">(</span><span style="color: #CE9178">"/product"</span><span style="color: #D4D4D4">), db, validate)</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span></code></pre>
<p>Move to <em><strong>/internal/app/model/product.go</strong></em> you’ll find a model of product that has a <code>Variants</code> field which would contains the list of variants of the product.</p>
<pre class="astro-code dark-plus" style="background-color: #1E1E1E; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #569CD6">type</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">Product</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">struct</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">	ID       uuid.UUID </span><span style="color: #CE9178">`gorm:"primaryKey;column:id" json:"id" swaggerignore:"true"`</span></span>
<span class="line"><span style="color: #D4D4D4">	Name     </span><span style="color: #4EC9B0">string</span><span style="color: #D4D4D4">    </span><span style="color: #CE9178">`gorm:"column:name" json:"name"`</span></span>
<span class="line"><span style="color: #D4D4D4">	IsActive </span><span style="color: #4EC9B0">bool</span><span style="color: #D4D4D4">      </span><span style="color: #CE9178">`gorm:"column:is_active" json:"is_active"`</span></span>
<span class="line"><span style="color: #D4D4D4">	Variants []Variant </span><span style="color: #CE9178">`gorm:"-" json:"variants"`</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span></code></pre>
<pre class="astro-code dark-plus" style="background-color: #1E1E1E; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #569CD6">type</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">VariantReqFilter</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">struct</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">	ProductID *uuid.UUID </span><span style="color: #CE9178">`query:"product_id"`</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">type</span><span style="color: #D4D4D4"> </span><span style="color: #4EC9B0">Variant</span><span style="color: #D4D4D4"> </span><span style="color: #569CD6">struct</span><span style="color: #D4D4D4"> {</span></span>
<span class="line"><span style="color: #D4D4D4">	ID          uuid.UUID </span><span style="color: #CE9178">`gorm:"primaryKey;column:id" json:"id" search:"id" swaggerignore:"true"`</span></span>
<span class="line"><span style="color: #D4D4D4">	Name        </span><span style="color: #4EC9B0">string</span><span style="color: #D4D4D4">    </span><span style="color: #CE9178">`gorm:"column:name" json:"name"`</span></span>
<span class="line"><span style="color: #D4D4D4">	ProductID   uuid.UUID </span><span style="color: #CE9178">`gorm:"column:product_id" json:"product_id"`</span></span>
<span class="line"><span style="color: #D4D4D4">	ProductName </span><span style="color: #4EC9B0">string</span><span style="color: #D4D4D4">    </span><span style="color: #CE9178">`gorm:"column:product_name" json:"product_name" `</span></span>
<span class="line"><span style="color: #D4D4D4">	Price       </span><span style="color: #4EC9B0">float64</span><span style="color: #D4D4D4">   </span><span style="color: #CE9178">`gorm:"column:price" json:"price" `</span></span>
<span class="line"><span style="color: #D4D4D4">	Stock       </span><span style="color: #4EC9B0">int</span><span style="color: #D4D4D4">       </span><span style="color: #CE9178">`gorm:"column:stock" json:"stock"`</span></span>
<span class="line"><span style="color: #D4D4D4">}</span></span></code></pre>
<p>From the models above, now we know there’s a <code>model</code> layer, and there are several different layers that will be envolved with the process in the app, such as:</p>
<ul>
<li>repository: a layer to work with data from your database.</li>
<li>usecase: this layer is a place where you put the main logic, usually communicate with <code>repository</code> and other <code>usecase</code>.</li>
<li>handler: receiving and handling incoming http requests and directing them to the right appropriate <code>usecase</code>.</li>
<li>route: mapping <code>usecase</code> and <code>handler</code> based on what endpoint being hit.</li>
</ul>
<p>Now for the rest of examinations, you can explore how the flow create, read, update and delete works by your own through the repo :D</p></div></article><footer class="w-full mt-16 flex items-center justify-center border-t border-gray-300 pt-12 text-gray-500 md:text-md"><span>&copy; Nurul Uhkrowi 2024</span><!-- <div class="flex items-center space-x-4">
    <a href="mailto:uhkrowi@gmail.com" target="_blank">
      <Mail size={18} strokeWidth={1.5} fill="#9ca3af" className="text-white" />
    </a>
    <a href="https://t.me/uhkrowi" target="_blank">
      <Send size={18} strokeWidth={1.5} fill="#9ca3af" className="text-white" />
    </a>
    <a href="https://linkedin.com/in/uhkrowi" target="_blank">
      <Linkedin
        size={18}
        strokeWidth={1.5}
        fill="#9ca3af"
        className="text-white"
      />
    </a>
  </div> --></footer></div></div><!-- <div class="relative main">
        <div class="hidden md:block sticky top-0 h-[150px]"></div>
        <div class="hidden md:block sticky top-[150px]">
          <div class="absolute left-[-200px]">
            <NavMenu />
          </div>
        </div>
        <div class="sticky top-[150px] pb-[50px]">
          <slot />
        </div>
      </div> --></div></body></html><!-- <script src=""/hljs/highlight.min.js"" defer></script> -->